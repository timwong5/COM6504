<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Global</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Global</h1>

    




<section>

<header>
    
        <h2></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="room"><span class="type-signature"></span>room<span class="type-signature"></span></h4>




<div class="description">
    this file contains the functions to control the drawing on the canvas
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="canvas.js.html">canvas.js</a>, <a href="canvas.js.html#line4">line 4</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="connectToRoom"><span class="type-signature"></span>connectToRoom<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    used to connect to a room. It gets the user name and room number from theinterface
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line87">line 87</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="deleteDB"><span class="type-signature"></span>deleteDB<span class="signature">(name)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Delete a database.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">Name of the database.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="idb_index.js.html">idb/index.js</a>, <a href="idb_index.js.html#line36">line 36</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="drawImageScaled"><span class="type-signature"></span>drawImageScaled<span class="signature">(img, canvas, ctx)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    called when it is required to draw the image on the canvas. We have resized the canvas to the same image sizeso ti is simpler to draw later
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>img</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>canvas</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ctx</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="canvas.js.html">canvas.js</a>, <a href="canvas.js.html#line113">line 113</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="drawOnCanvas"><span class="type-signature">(async) </span>drawOnCanvas<span class="signature">(ctx, canvasWidth, canvasHeight, prevX, prevY, currX, currY, color, thickness)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    this is called when we want to display what we (or any other connected via socket.io) draws on the canvasnote that as the remote provider can have a different canvas size (e.g. their browser window is larger)we have to know what their canvas size is so to map the coordinates
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>ctx</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">the canvas context</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>canvasWidth</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">the originating canvas width</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>canvasHeight</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">the originating canvas height</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>prevX</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">the starting X coordinate</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>prevY</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">the starting Y coordinate</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>currX</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">the ending X coordinate</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>currY</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">the ending Y coordinate</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>color</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">of the line</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>thickness</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">of the line</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="canvas.js.html">canvas.js</a>, <a href="canvas.js.html#line140">line 140</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="generateRoom"><span class="type-signature"></span>generateRoom<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    called to generate a random room numberThis is a simplification. A real world implementation would ask the server to generate a unique room numberso to make sure that the room number is not accidentally repeated across uses
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line65">line 65</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getAnnotationData"><span class="type-signature">(async) </span>getAnnotationData<span class="signature">(roomID)</span><span class="type-signature"> &rarr; {Promise.&lt;any>}</span></h4>
    

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>roomID</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="database.js.html">database.js</a>, <a href="database.js.html#line145">line 145</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;any></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getChatData"><span class="type-signature">(async) </span>getChatData<span class="signature">(roomID)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    get the chatData
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>roomID</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="database.js.html">database.js</a>, <a href="database.js.html#line133">line 133</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="hideLoginInterface"><span class="type-signature"></span>hideLoginInterface<span class="signature">(room, userId)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    it hides the initial form and shows the chat
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>room</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">the selected room</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>userId</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">the user name</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line125">line 125</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="init"><span class="type-signature">(async) </span>init<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    called by <body onload>it initialises the interface and the expected socket messagesplus the associated actions
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line23">line 23</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="initCanvas"><span class="type-signature"></span>initCanvas<span class="signature">(sckt, imageUrl)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    it inits the image canvas to draw on. It sets up the events to respond to (click, mouse on, etc.)it is also the place where the data should be sent via socket.io
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>sckt</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">the open socket to register events on</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>imageUrl</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">teh image url to download</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="canvas.js.html">canvas.js</a>, <a href="canvas.js.html#line14">line 14</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="initDatabase"><span class="type-signature">(async) </span>initDatabase<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    init two databasesstores the chat records and annotations
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="database.js.html">database.js</a>, <a href="database.js.html#line13">line 13</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="onSubmit"><span class="type-signature"></span>onSubmit<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    to submit the form
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line254">line 254</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="openDB"><span class="type-signature"></span>openDB<span class="signature">(name, version, callbacks)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Open a database.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">Name of the database.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>version</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">Schema version.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callbacks</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">Additional callbacks.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="idb_index.js.html">idb/index.js</a>, <a href="idb_index.js.html#line11">line 11</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="sendAjaxQuery"><span class="type-signature"></span>sendAjaxQuery<span class="signature">(url, data)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    using ajax to communicate
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line172">line 172</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="sendChatText"><span class="type-signature"></span>sendChatText<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    called when the Send button is pressed. It gets the text to send from the interfaceand sends the message via socket
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line74">line 74</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="storeAnnotationData"><span class="type-signature">(async) </span>storeAnnotationData<span class="signature">(annotationData)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    store the annotation data
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>annotationData</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="database.js.html">database.js</a>, <a href="database.js.html#line119">line 119</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="storeChatData"><span class="type-signature">(async) </span>storeChatData<span class="signature">(chatData)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    store the chatData
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>chatData</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="database.js.html">database.js</a>, <a href="database.js.html#line107">line 107</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="writeOnHistory"><span class="type-signature"></span>writeOnHistory<span class="signature">(text:)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    it appends the given html text to the history divthis is to be called when the socket receives the chat message (socket.on ('message'...)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>text:</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last">the text to append</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line105">line 105</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#connectToRoom">connectToRoom</a></li><li><a href="global.html#deleteDB">deleteDB</a></li><li><a href="global.html#drawImageScaled">drawImageScaled</a></li><li><a href="global.html#drawOnCanvas">drawOnCanvas</a></li><li><a href="global.html#generateRoom">generateRoom</a></li><li><a href="global.html#getAnnotationData">getAnnotationData</a></li><li><a href="global.html#getChatData">getChatData</a></li><li><a href="global.html#hideLoginInterface">hideLoginInterface</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#initCanvas">initCanvas</a></li><li><a href="global.html#initDatabase">initDatabase</a></li><li><a href="global.html#onSubmit">onSubmit</a></li><li><a href="global.html#openDB">openDB</a></li><li><a href="global.html#room">room</a></li><li><a href="global.html#sendAjaxQuery">sendAjaxQuery</a></li><li><a href="global.html#sendChatText">sendChatText</a></li><li><a href="global.html#storeAnnotationData">storeAnnotationData</a></li><li><a href="global.html#storeChatData">storeChatData</a></li><li><a href="global.html#writeOnHistory">writeOnHistory</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Wed Oct 06 2021 10:25:24 GMT+0800 (中国标准时间)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>